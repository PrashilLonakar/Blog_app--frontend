import './polyfills.server.mjs';
import{a as fe,b as ve}from"./chunk-3F22X2WI.mjs";import{a as ce}from"./chunk-ETY7J6CU.mjs";import{a as ue}from"./chunk-GCB2FELP.mjs";import{a as de,b as pe}from"./chunk-RKTZXAEF.mjs";import"./chunk-XHRENCHR.mjs";import{A as ne,b as q,d as _,f as Q,g as H,h as Y,k as K,l as W,m as $,o as J,p as X,q as Z,r as ee,s as te,x as ie,y as re,z as oe}from"./chunk-MJVBBUFZ.mjs";import{a as ae,b as le,c as me,g as se}from"./chunk-H2KYOXOE.mjs";import{O as G}from"./chunk-WBEOKIC4.mjs";import{h as D,k as R,q as j}from"./chunk-MOBMO3SR.mjs";import"./chunk-UTEJNEE6.mjs";import{Ab as o,Bb as f,Fb as F,Ib as g,Kb as S,Ob as x,Pb as N,Qb as P,Qc as U,Rb as B,Sb as d,Ta as M,Tb as I,Tc as L,Ub as z,Wa as a,Xa as C,Zb as O,fa as E,jb as h,na as u,oa as c,ob as w,qb as p,sb as V,vb as y,wb as k,xb as T,yb as A,zb as r}from"./chunk-HY47MGUS.mjs";import"./chunk-KXIJJ5ZC.mjs";var ge=["fileInput"];function he(n,l){n&1&&(r(0,"mat-icon"),d(1,"upload"),o(),r(2,"p"),d(3,"Upload your Profile pic"),o())}function _e(n,l){if(n&1){let m=F();r(0,"div"),f(1,"img",23),r(2,"p")(3,"span",24),d(4),o(),d(5),o(),r(6,"mat-icon",25),g("click",function(){u(m);let i=S(2);return c(i.removeImage())}),d(7,"delete"),o()()}if(n&2){let m=S(2);a(),p("src",m.imagePreview(),M),a(3),I(m.imageName()),a(),z(" (",m.fileSize()," KB) ")}}function be(n,l){if(n&1&&(r(0,"div"),w(1,_e,8,3,"div",22),o()),n&2){let m=S();a(),p("ngIf",m.selectedFile||m.imagePreview)}}function Ce(n,l){if(n&1&&(r(0,"mat-option",16),d(1),o()),n&2){let m=l.$implicit;p("value",m.value),a(),I(m.viewValue)}}var Ke=(()=>{let l=class l{constructor(e,i,t,s){this.titleService=e,this.route=i,this.formBuilder=t,this.snackBar=s,this.pageName="",this.breadCrumbs=[],this.buttonContent={},this.isBthShow=!1,this.imageName=h(""),this.fileSize=h(0),this.uploadProgress=h(0),this.imagePreview=h(""),this.selectedFile=null,this.uploadSuccess=!1,this.uploadError=!1,this.isSubmit=h(!1),this.foods=[{value:"steak-0",viewValue:"Steak"},{value:"pizza-1",viewValue:"Pizza"},{value:"tacos-2",viewValue:"Tacos"}],this.postForm=new Y({})}ngOnInit(){let e=[];this.setUpPostForm(e),this.route.data.subscribe(i=>{let t=i.title;t&&(this.pageName=t,this.titleService.setTitle(t)),i.breadcrumbs&&(this.breadCrumbs=i.breadcrumbs),i.btnData&&(this.buttonContent=i.btnData)})}setUpPostForm(e){this.postForm=this.formBuilder.group({title:["",[_.required,_.maxLength(100)]],content:[e?.content?e.content:"",[_.required,_.maxLength(2e3)]],mainImageUrl:[e?.mainImageUrl?e.mainImageUrl:""],categoryId:[e?.categoryId?e.categoryId:"",_.required],userId:[e?.userId?e.userId:""]})}onFileChange(e){let i=e.target.files[0];this.uploadFile(i)}onFileDrop(e){e.preventDefault();let i=e.dataTransfer?.files[0];this.uploadFile(i)}onDragOver(e){e.preventDefault()}uploadFile(e){if(e&&e.type.startsWith("image/")){this.selectedFile=e,this.fileSize.set(Math.round(e.size/1024));let i=new FileReader;i.onload=t=>{this.imagePreview.set(t.target?.result)},i.readAsDataURL(e),this.uploadSuccess=!0,this.uploadError=!1,this.imageName.set(e.name)}else this.uploadSuccess=!1,this.uploadError=!0,this.snackBar.open("Only image files are supported!","Close",{duration:3e3,panelClass:"error"})}removeImage(){this.selectedFile=null,this.imageName.set(""),this.fileSize.set(0),this.imagePreview.set(""),this.uploadSuccess=!1,this.uploadError=!1,this.uploadProgress.set(0)}onSubmit(){if(this.isSubmit.set(!0),de.showFieldsError(this.postForm)){this.postForm.markAllAsTouched();return}console.log("val",this.postForm.value)}};l.\u0275fac=function(i){return new(i||l)(C(D),C(R),C(J),C(ue))},l.\u0275cmp=E({type:l,selectors:[["app-add-edit"]],viewQuery:function(i,t){if(i&1&&x(ge,5),i&2){let s;N(s=P())&&(t.fileInput=s.first)}},standalone:!0,features:[O],decls:40,vars:17,consts:[["fileInput",""],[3,"title","breadCrumbsArr","btn","isBtnShow"],[3,"keyup.enter","formGroup"],[1,"form-container"],[1,"row","mb-3"],[1,"col-12","file-upload-wrapper-col"],[1,"file-upload-wrapper",3,"drop","dragover"],["type","file","accept","image/*","hidden","","formControlName","mainImageUrl",3,"change"],[1,"file-dropper",3,"click"],[1,"row","mb-1"],[1,"col-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Your title","formControlName","title"],[1,"d-flex","mt-1"],[3,"control","propertyLabel"],["formControlName","categoryId"],[3,"value"],[1,"col-12"],["matInput","","placeholder","Yours content","formControlName","content"],[1,"row","mb-1","btn-submit"],[1,"col-12","d-flex","justify-content-end"],["mat-flat-button","","color","primary","type","submit",3,"click"],[4,"ngIf"],["alt","Image Preview",1,"image-preview",3,"src"],[1,"image-name"],[1,"delete-icon",3,"click"]],template:function(i,t){if(i&1){let s=F();f(0,"sub-header",1),r(1,"form",2),g("keyup.enter",function(){return u(s),c(t.onSubmit())}),r(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),g("drop",function(v){return u(s),c(t.onFileDrop(v))})("dragover",function(v){return u(s),c(t.onDragOver(v))}),r(6,"input",7,0),g("change",function(v){return u(s),c(t.onFileChange(v))}),o(),r(8,"div",8),g("click",function(){u(s);let v=B(7);return c(v.click())}),w(9,he,4,0)(10,be,2,1,"div"),o()()()(),r(11,"div",9)(12,"div",10)(13,"mat-form-field",11)(14,"mat-label"),d(15,"Title"),o(),f(16,"input",12),r(17,"mat-error",13),f(18,"validation-message",14),o()()(),r(19,"div",10)(20,"mat-form-field",11)(21,"mat-label"),d(22,"Category"),o(),r(23,"mat-select",15),T(24,Ce,2,2,"mat-option",16,k),o(),r(26,"mat-error",13),f(27,"validation-message",14),o()()()(),r(28,"div",4)(29,"div",17)(30,"mat-form-field",11)(31,"mat-label"),d(32,"Content"),o(),f(33,"textarea",18),r(34,"mat-error",13),f(35,"validation-message",14),o()()()()(),r(36,"div",19)(37,"div",20)(38,"button",21),g("click",function(){return u(s),c(t.onSubmit())}),d(39," Submit "),o()()()()}i&2&&(p("title",t.pageName)("breadCrumbsArr",t.breadCrumbs)("btn",t.buttonContent)("isBtnShow",t.isBthShow),a(),p("formGroup",t.postForm),a(4),V("success",t.uploadSuccess)("error",t.uploadError),a(4),y(t.imagePreview()?-1:9),a(),y(t.imageName()?10:-1),a(8),p("control",t.postForm.controls.title)("propertyLabel","Title"),a(6),A(t.foods),a(3),p("control",t.postForm.controls.categoryId)("propertyLabel","Category"),a(8),p("control",t.postForm.controls.content)("propertyLabel","Content"))},dependencies:[ce,ne,oe,ie,ee,te,re,pe,X,K,q,Q,H,Z,W,$,j,le,ae,se,me,L,U,ve,fe,G],styles:[".form-container[_ngcontent-%COMP%]{margin-bottom:5rem}.btn-submit[_ngcontent-%COMP%]{position:fixed;bottom:25px;right:25px}.btn-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px}"]});let n=l;return n})();export{Ke as AddEditComponent};
